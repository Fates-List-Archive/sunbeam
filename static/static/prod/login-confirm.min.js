var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};function makeSmaller(){$("#msg").contents().unwrap().wrap("<h5 id='msg' class='text-center' style='color: red'></h5>")}
function loginUser(){dev=localStorage.getItem("login-dev");retry="<br/><br/><a href='https://fateslist.xyz/fates/login'>Try Again?</a>";searchParams=new URLSearchParams(window.location.search);(error=searchParams.get("error"))?(makeSmaller(),$("#msg").html("Login Cancelled"+retry)):(code=searchParams.get("code"),state=searchParams.get("state"),code&&state?(scopes=localStorage.getItem("login-scopes"))?$.ajax({url:"/api/users",method:"POST",contentType:"application/json",data:JSON.stringify({code:code,
scopes:JSON.parse(scopes)}),statusCode:{206:function(a){localStorage.removeItem("login-scopes");dev?(makeSmaller(),$("#msg").html("Please copy the below into the app requesting auth: <br/><br/><code style='text-align: left !important'>"+a.token+"</code>"),localStorage.removeItem("login-dev")):window.location.href=localStorage.getItem("login-redirect")},400:function(a){makeSmaller();$("#msg").html(a.responseJSON.reason+retry)},403:function(a){makeSmaller();banInfo='\n\t      \t\t\t\t<br/><br/>\n\t\t\t\t\t<p style="text-align: left !important; margin-left: 10em">\n\t\t\t\t\tYou have been '+
a.responseJSON.ban.type+" banned.<br/>\n\t\t\t\t\tAs a result, "+a.responseJSON.ban.desc+'\n\t       \t\t\t\t<br/><br/>\n\t\t\t\t\t<strong>Please click <a href="/fates/banappeal?token='+a.responseJSON.token+'">here</a> or contact a Fates List Staff Member to appeal this ban</strong>\n\t\t\t\t\t</p>\n\t\t\t\t\t';$("#msg").html(a.responseJSON.reason+banInfo)},422:function(a){makeSmaller();$("#msg").html("This script needs to be updated:<br/><code>"+JSON.stringify(a.responseJSON)+"</code>"+retry)},429:function(a){makeSmaller();
$("#msg").html(a.responseJSON.reason+retry)},500:function(a){makeSmaller();$("#msg").html('Internal Server Error<br/>Traceback:<br/><pre style="text-align: left !important">'+a.responseJSON.traceback+"</pre>"+retry)}}}):(makeSmaller(),$("#msg").html("No scopes set"+retry)):(makeSmaller(),$("#msg").html("Invalid code/state"+retry)))}$(document).ready(function(){loginUser()});
