import{S as d,i as u,s as g,e as y,c as b,a as m,d as l,V as w,f as S,W as c}from"../../chunks/vendor-22677977.js";function L(n){let t;return{c(){t=y("p"),this.h()},l(e){t=b(e,"P",{style:!0});var a=m(t);a.forEach(l),this.h()},h(){w(t,"font-size","bold")},m(e,a){S(e,t,a),t.innerHTML=n[0]},p(e,[a]){a&1&&(t.innerHTML=e[0])},i:c,o:c,d(e){e&&l(t)}}}const x=!1;function _(n,t,e){let a="",s="Please wait...";{let f=function(){e(0,s=`Logging you in and redirecting you back to ${a}. Please wait...`);let h="<br/><br/><a href='https://fateslist.xyz'>Try Again?</a>",o=new URLSearchParams(window.location.search);if(o.get("error")){e(0,s="Login Cancelled");return}let i=o.get("code"),p=o.get("state");(!i||!p)&&e(0,s="Invalid code/state"+h),fetch("https://api.fateslist.xyz/api/v2/users",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json",Frostpaw:"0.1.0"},body:JSON.stringify({scopes:["identify"],code:i})}).then(r=>r.json()).then(r=>{r.done?window.location.href=a:r.banned?e(0,s=`<h1>${r.reason}</h1><br/><h2>This is a ${r.ban.type} ban and ${r.ban.desc}.</h2><br/>You can try to appeal this ban at <a href="https://fateslist.xyz/banappeal">our ban appeal server</a>`):e(0,s=`Got error: ${JSON.stringify(r)}`)})};a=localStorage.sunbeamLogin,a||(a="/"),f()}return[s]}class z extends d{constructor(t){super();u(this,t,_,L,g,{})}}export{z as default,x as prerender};
