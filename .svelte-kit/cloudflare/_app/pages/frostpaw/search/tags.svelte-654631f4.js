import{S as D,i as G,s as J,v as y,j as w,e as E,t as A,w as T,l as k,c as H,a as L,g as I,d as u,b as M,x as j,f as v,F as C,p,n as d,A as F,k as O,m as K,o as P,Y as Q}from"../../../chunks/vendor-22677977.js";import{f as R}from"../../../chunks/request-2d5483df.js";import{C as V,B as W}from"../../../chunks/CardContainer-fe7298a5.js";import{S as X,T as Z}from"../../../chunks/Tag-6f90ee50.js";import{B as x}from"../../../chunks/BristlefrostMeta-4b5eefb5.js";import"../../../chunks/enums-06152dee.js";function U(f,r,i){const s=f.slice();return s[3]=r[i],s}function Y(f){let r,i;return r=new W({props:{data:f[3],type:f[1],rand:!1}}),{c(){y(r.$$.fragment)},l(s){T(r.$$.fragment,s)},m(s,t){j(r,s,t),i=!0},p(s,t){const c={};t&1&&(c.data=s[3]),t&2&&(c.type=s[1]),r.$set(c)},i(s){i||(p(r.$$.fragment,s),i=!0)},o(s){d(r.$$.fragment,s),i=!1},d(s){F(r,s)}}}function ee(f){let r,i,s=f[0].search_res,t=[];for(let a=0;a<s.length;a+=1)t[a]=Y(U(f,s,a));const c=a=>d(t[a],1,1,()=>{t[a]=null});return{c(){for(let a=0;a<t.length;a+=1)t[a].c();r=O()},l(a){for(let n=0;n<t.length;n+=1)t[n].l(a);r=O()},m(a,n){for(let l=0;l<t.length;l+=1)t[l].m(a,n);v(a,r,n),i=!0},p(a,n){if(n&3){s=a[0].search_res;let l;for(l=0;l<s.length;l+=1){const _=U(a,s,l);t[l]?(t[l].p(_,n),p(t[l],1)):(t[l]=Y(_),t[l].c(),p(t[l],1),t[l].m(r.parentNode,r))}for(K(),l=s.length;l<t.length;l+=1)c(l);P()}},i(a){if(!i){for(let n=0;n<s.length;n+=1)p(t[n]);i=!0}},o(a){t=t.filter(Boolean);for(let n=0;n<t.length;n+=1)d(t[n]);i=!1},d(a){Q(t,a),a&&u(r)}}}function te(f){let r,i,s,t,c,a,n,l,_,g,S,m,q,h,B;return r=new x({props:{url:"https://fateslist.xyz/frostpaw/search/tags?q="+f[2]+"&target_type="+f[1],title:"Search results for "+f[1]+"s tagged with "+f[2],description:"Find, invite and discover the best "+f[2]+" "+f[1]+"s",thumbnail:"https://fateslist.xyz/static/botlisticon.webp"}}),g=new X({props:{type:f[1],query:""}}),m=new Z({props:{targetType:f[1],tags:f[0].tags_fixed}}),h=new V({props:{$$slots:{default:[ee]},$$scope:{ctx:f}}}),{c(){y(r.$$.fragment),i=w(),s=E("section"),t=E("h1"),c=A("Fates List"),a=w(),n=E("h2"),l=A("Find the best bots for your servers!"),_=w(),y(g.$$.fragment),S=w(),y(m.$$.fragment),q=w(),y(h.$$.fragment),this.h()},l(e){T(r.$$.fragment,e),i=k(e),s=H(e,"SECTION",{class:!0});var o=L(s);t=H(o,"H1",{class:!0});var $=L(t);c=I($,"Fates List"),$.forEach(u),a=k(o),n=H(o,"H2",{class:!0});var b=L(n);l=I(b,"Find the best bots for your servers!"),b.forEach(u),o.forEach(u),_=k(e),T(g.$$.fragment,e),S=k(e),T(m.$$.fragment,e),q=k(e),T(h.$$.fragment,e),this.h()},h(){M(t,"class","svelte-vvwszp"),M(n,"class","best-bots svelte-vvwszp"),M(s,"class","svelte-vvwszp")},m(e,o){j(r,e,o),v(e,i,o),v(e,s,o),C(s,t),C(t,c),C(s,a),C(s,n),C(n,l),v(e,_,o),j(g,e,o),v(e,S,o),j(m,e,o),v(e,q,o),j(h,e,o),B=!0},p(e,[o]){const $={};o&6&&($.url="https://fateslist.xyz/frostpaw/search/tags?q="+e[2]+"&target_type="+e[1]),o&6&&($.title="Search results for "+e[1]+"s tagged with "+e[2]),o&6&&($.description="Find, invite and discover the best "+e[2]+" "+e[1]+"s"),r.$set($);const b={};o&2&&(b.type=e[1]),g.$set(b);const z={};o&2&&(z.targetType=e[1]),o&1&&(z.tags=e[0].tags_fixed),m.$set(z);const N={};o&67&&(N.$$scope={dirty:o,ctx:e}),h.$set(N)},i(e){B||(p(r.$$.fragment,e),p(g.$$.fragment,e),p(m.$$.fragment,e),p(h.$$.fragment,e),B=!0)},o(e){d(r.$$.fragment,e),d(g.$$.fragment,e),d(m.$$.fragment,e),d(h.$$.fragment,e),B=!1},d(e){F(r,e),e&&u(i),e&&u(s),e&&u(_),F(g,e),e&&u(S),F(m,e),e&&u(q),F(h,e)}}}const ie=!1;async function ce({url:f,session:r,fetch:i}){console.log("url is:",r);let s=r.query.tag,t=r.query.target_type;console.log(s);const c=`/api/v2/search/tags?target_type=${t}&tag=${s}`,a=await R(c,"",i);return a.ok?{props:{data:await a.json(),targetType:t,tag:s}}:{status:a.status,error:new Error("Tag Search Error")}}function se(f,r,i){let{data:s}=r,{targetType:t}=r,{tag:c}=r;return f.$$set=a=>{"data"in a&&i(0,s=a.data),"targetType"in a&&i(1,t=a.targetType),"tag"in a&&i(2,c=a.tag)},[s,t,c]}class ue extends D{constructor(r){super();G(this,r,se,te,J,{data:0,targetType:1,tag:2})}}export{ue as default,ce as load,ie as prerender};
